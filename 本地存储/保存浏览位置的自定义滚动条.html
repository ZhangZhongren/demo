<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>自定义滚动条</title>
		<style>
			.box{
				width: 300px;
				height: 500px;
				border: 1px solid black;
				overflow: hidden;
				margin: 100px auto;
				padding: 10px;
				position: relative;
				border-radius: 5px;
			}
			#scroll{
				width: 10px;
				height: 520px;
				background-color: #ccc;
				position: absolute;
				right: 0;top: 0;
				border-radius: 5px;
			}
			#move{
				position: absolute;
				left: 0;
				top: 0;
				width: 10px;
				height: 40px;
				border-radius: 5px;
				background-color: white;
				border: 1px solid black;
			}
			p{
				position: absolute;
				left: 0;
				top: 0;
				user-select: none;
				padding: 20px;
			}
		</style>
	</head>
	<body>
		<div class="box">
			<p class="p">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Rerum esse, nulla inventore qui commodi. Dolorum ad sit quae eum praesentium, aspernatur maiores velit blanditiis, aperiam. Quis nihil adipisci harum eligendi, laudantium aperiam similique autem? Cumque at eos, non similique magni sunt totam obcaecati, maxime dolores vel, ad perspiciatis maiores, voluptate. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eaque voluptatem in commodi, dolores aut minus sed saepe eos rem impedit eius ducimus dolorem earum quos, ut obcaecati id, vitae numquam iste excepturi quae, porro optio tenetur aperiam beatae. Nulla harum quisquam velit eos quaerat nesciunt reprehenderit laboriosam facere vero, ullam, rerum, quibusdam ea amet inventore laudantium? Magni minima animi consequuntur facere explicabo illo atque praesentium saepe consequatur, quas enim sequi recusandae dolorum itaque labore illum aliquam possimus quam culpa provident. Ducimus nostrum dolorem eius nesciunt, assumenda eaque tempora laboriosam. Quos dolore cumque eveniet aliquid dolorum at sit exercitationem doloribus minus, pariatur aut autem velit qui magni deleniti inventore asperiores, rem nisi eum culpa odit provident harum. At maiores placeat aut nostrum consequuntur inventore atque harum exercitationem praesentium, quos quas, numquam. Ipsa alias possimus mollitia quaerat cupiditate voluptate! Error enim at reprehenderit assumenda quae, eius harum tempora accusamus beatae sunt voluptates est doloribus sed repellat voluptatum iusto maxime expedita nostrum! Perferendis rem numquam, ipsa voluptatem vero debitis quas non ratione dicta. Sit obcaecati, velit recusandae sed. Delectus voluptates incidunt modi sequi esse repellat suscipit, accusantium, numquam, porro expedita assumenda. Dolorum officia at dolorem. Eaque, iusto, magni. Iste iusto sed necessitatibus, eligendi, non ullam omnis, dolorem sequi dolores vel ipsum nisi voluptas consequatur! Sit, adipisci nesciunt accusantium? Illum at voluptatum doloribus est consequatur reiciendis cumque nisi ut aspernatur culpa distinctio sed architecto modi qui nam eum amet, adipisci ad. Error reiciendis velit deleniti, harum, nisi fugit eveniet ipsam laborum mollitia minima modi delectus similique fuga sapiente! Consequatur ducimus provident enim eum recusandae sit, eius repudiandae voluptas illum dolor maxime, deserunt aspernatur at dicta assumenda, eligendi eveniet quas temporibus nulla ad cum sunt! Maiores repellat eveniet earum culpa modi ea, esse dolorum unde ratione tenetur, ipsum quas, voluptatem error repellendus doloribus voluptatibus odio quae eligendi. Eligendi, dolorum, maiores. Aliquid quia veritatis quibusdam, molestiae nam expedita, itaque numquam aperiam quam voluptates dolores voluptatum. Adipisci perspiciatis, magnam suscipit obcaecati eveniet optio, culpa cumque. Consectetur necessitatibus veniam debitis, cum quam consequuntur commodi totam aut blanditiis laborum vitae harum vero autem itaque saepe modi. Aliquid aliquam nulla nostrum, praesentium dolorum ex, maiores fuga. Iusto porro, iure dicta omnis impedit pariatur ducimus, consequatur consectetur suscipit repellendus modi harum quisquam nihil. Harum cupiditate laborum, dolores veritatis magnam nobis facilis assumenda amet repellendus voluptatum fuga id, esse consectetur iure, fugit debitis similique aliquam laboriosam voluptate! Quos consequuntur reprehenderit, accusamus mollitia ab nostrum voluptas, atque, dignissimos dolor natus laudantium aliquid qui. Similique nisi placeat deleniti, iusto ea sunt vitae quia sapiente doloribus, fugit maxime quam veniam culpa libero ipsa facilis eius voluptatum exercitationem laboriosam inventore ducimus soluta distinctio, eligendi odit. Molestiae dolor temporibus quos. Enim voluptas est beatae exercitationem omnis fugiat eaque sit nihil temporibus amet sequi labore architecto repudiandae dolorum culpa, rem, quis veniam molestias ipsa nisi. Quidem distinctio odio officiis minima quisquam ex, deserunt ipsam id adipisci explicabo tempore rem molestiae iusto nesciunt modi natus, ratione hic. Molestiae officiis impedit, natus ut dolores id reiciendis, beatae, iste voluptate mollitia adipisci sed suscipit soluta in quae doloremque dolore. Dolor incidunt, asperiores quis voluptatem animi officiis, impedit consequatur neque aliquid odio, blanditiis voluptas nulla maxime reiciendis placeat ex tenetur ipsam quidem illum! Laborum, quia, ratione. Molestias eligendi aliquam quod illum iusto, enim accusamus voluptas, assumenda voluptatibus saepe possimus, ducimus praesentium qui! Tenetur, iste amet nam provident quae incidunt libero! Neque omnis molestias ad. Neque nam inventore aliquam, quia unde fuga delectus repudiandae nihil cumque vitae sit molestias totam, sed maiores ab ea perferendis ut? Tenetur aspernatur doloribus consequatur qui commodi, perspiciatis cum fuga culpa ipsa! Sed incidunt voluptate officiis unde porro aut nostrum architecto dolorum adipisci, repellendus nemo facere, nihil cupiditate hic libero ipsa. Nam facilis, dolore distinctio adipisci modi, nobis harum velit! Possimus soluta, quo dolorem omnis suscipit nulla? Qui, temporibus, vitae. Necessitatibus voluptatem veniam accusamus esse soluta eveniet consectetur ad dolorum molestias omnis quisquam perferendis deserunt placeat quos, eligendi, accusantium mollitia iure eos. Cupiditate facere laborum reiciendis distinctio unde dicta atque repudiandae aliquid qui, recusandae impedit non hic, ab corporis obcaecati inventore provident, illum ipsam ullam. Velit cum veniam voluptatibus, cupiditate molestiae, placeat tempora porro asperiores aperiam ex reiciendis dolorem blanditiis. Autem alias suscipit cumque sint. In, doloribus omnis. Ad et repellendus facilis qui cum dolorem atque, magnam eos mollitia, asperiores, veniam vero repudiandae rerum maxime enim eligendi, nisi sed? Alias, repellendus. Qui culpa consectetur obcaecati molestiae exercitationem officiis optio, est eos velit doloremque, nesciunt quas quod quibusdam. Saepe distinctio similique quisquam temporibus, ducimus mollitia unde vero excepturi nesciunt molestias. Perferendis aperiam eligendi amet, vitae odit, provident magnam molestiae sunt neque adipisci voluptate magni nisi dolor ipsam minima, soluta quam voluptatum voluptatem iste ipsa alias cum. Fuga deleniti dolores voluptatum unde natus nam tenetur. Adipisci laborum ea vitae nemo omnis accusantium, quibusdam dolore vero aliquam, quaerat numquam dolorum provident doloremque quos quis magni ad iste minima nostrum dicta! Hic facilis, dolores ipsa unde similique dolore officia inventore. Voluptatum possimus, repudiandae illum dolore nostrum voluptate, distinctio veniam nobis obcaecati facere odit sint, ad error quibusdam hic temporibus. Sequi molestias atque, sit voluptatem cumque tempora fugiat facere fugit voluptatibus incidunt autem accusamus numquam nisi maiores, error id non voluptates. Fuga commodi repellat id culpa vitae facilis odit adipisci eaque amet, consectetur officiis! Laboriosam excepturi ea, quo officiis maxime, nostrum repellat temporibus eligendi, quae vero necessitatibus ullam id assumenda. Non beatae atque ipsum libero, accusantium consequuntur nostrum vero quos! Minus vero dicta eum velit ullam nulla optio voluptas est quaerat? Illo sint culpa modi magni eius dolores et assumenda labore quasi at, libero quae quod vitae placeat porro laboriosam facere, atque quo in rem qui dolorem perspiciatis dolor. Inventore, magnam ab expedita iste harum eligendi voluptatum eum fuga, natus sunt accusamus possimus veniam mollitia nulla facilis accusantium ullam facere. Ad nihil quod odio earum repudiandae expedita libero iusto, ea temporibus, laudantium qui in possimus minus saepe iste natus atque dignissimos, tempora numquam harum beatae ipsa magnam. Aspernatur non doloribus ipsum esse, hic, enim, quidem culpa aliquam aperiam reprehenderit nisi ducimus tenetur amet.</p>
			<div id="scroll">
				<div id="move"></div>
			</div>
		</div>
	</body>
	<script>
		var box = document.getElementsByClassName('box')[0];
		var scroll = document.getElementById('scroll');
		var move = document.getElementById('move');
		var p = document.getElementsByClassName('p')[0];
		move.onmousedown=function(ev){
			var evObj = window.event || ev;
			var y = evObj.offsetY;
			document.onmousemove=function(ev){
				var evObj = window.event || ev;
				var Top = evObj.pageY - box.offsetTop - 2 - y;
				if(Top<=0){
					Top=0;
				}
				if(Top>478){
					Top = 478;
				}
				move.style.top = Top +'px';
				p.style.top = -((move.offsetTop)/scroll.offsetHeight*p.offsetHeight) + 'px';

				var date = new Date();
				date.setDate(date.getDate() + 3)//三天以后过期
				document.cookie = 'occasion = '+move.style.top+';expires = '+ date.toUTCString() +'';
				document.cookie = 'occasionp = '+p.style.top+';expires = '+ date.toUTCString() +'';
			}
		}
		document.onmouseup=function(){
			document.onmousemove=null;
		}


		// 存储位置
		// window.unload=function(){
			
		// }

		console.log(document.cookie);
		if(getCookie('occasion') && getCookie('occasionp')){
			move.style.top = getCookie('occasion');
			p.style.top = getCookie('occasionp');
		}
		// 取cookie里面指定key 的值的函数
		function getCookie(key){
			var arr = document.cookie.split('; ');
			for(index in arr){
				var resArr = arr[index].split('=');
				if(resArr[0] == key){
				return resArr[1];
				}
			}
			 
		}
	</script>
</html>
